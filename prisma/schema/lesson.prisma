model ClassDiary {
  id Int @id @default(autoincrement())

  // Tenant & academic isolation
  schoolId       Int
  academicYearId Int

  // Ownership
  teacherId Int
  teacher   TeacherProfile @relation(fields: [teacherId], references: [id], onDelete: Cascade)

  // Academic mapping
  classId        Int
  sectionId      Int
  subjectId      Int
  classSubjectId Int?

  // Content
  title       String // e.g. "Chapter 1: Intro"
  topic       String? // e.g. "Photosynthesis"
  description String? // What was taught
  homework    String?

  // Attachments/Links
  studyMaterial Json? // [{ "title": "Video", "url": "..." }]

  lessonDate DateTime

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  school       School        @relation(fields: [schoolId], references: [id], onDelete: Cascade)
  academicYear AcademicYear  @relation(fields: [academicYearId], references: [id], onDelete: Cascade)
  class        Class         @relation(fields: [classId], references: [id], onDelete: Cascade)
  section      Section       @relation(fields: [sectionId], references: [id], onDelete: Cascade)
  subject      Subject       @relation(fields: [subjectId], references: [id], onDelete: Cascade)
  classSubject ClassSubject? @relation(fields: [classSubjectId], references: [id], onDelete: SetNull)

  @@index([schoolId, academicYearId])
  @@index([teacherId])
  @@index([classId, sectionId])
  @@index([subjectId])
  @@index([lessonDate])
}

model Syllabus {
  id Int @id @default(autoincrement())

  schoolId       Int
  academicYearId Int

  classId   Int
  subjectId Int

  title       String
  description String?

  attachments Json? // [{ "title": "Syllabus PDF", "url": "..." }]

  isCompleted Boolean   @default(false)
  completedAt DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  school       School       @relation(fields: [schoolId], references: [id], onDelete: Cascade)
  academicYear AcademicYear @relation(fields: [academicYearId], references: [id], onDelete: Cascade)
  class        Class        @relation(fields: [classId], references: [id], onDelete: Cascade)
  subject      Subject      @relation(fields: [subjectId], references: [id], onDelete: Cascade)

  @@index([schoolId, academicYearId])
  @@index([classId, subjectId])
}
